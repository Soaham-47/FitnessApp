{% extends 'base.html' %}
{% load static %}

{% block title %}Workout Session - {{ session.workout.name }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/workouts.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="session-header">
        <h1 class="text-primary">{{ session.workout.name }}</h1>
        <p>Workout in Progress - Keep Going! ðŸ’ª</p>
    </div>
    
    <div class="card">
        <h2 class="text-primary mb-3">Log Your Exercises</h2>
        
        {% for we in workout_exercises %}
        <form method="post" action="{% url 'log_exercise' session.id we.exercise.id %}" class="exercise-log-form">
            {% csrf_token %}
            <div class="d-flex align-center gap-2 mb-3">
                <span class="exercise-number">{{ forloop.counter }}</span>
                <div style="flex: 1;">
                    <h3>{{ we.exercise.name }}</h3>
                    <p class="text-gray">{{ we.exercise.description|truncatewords:20 }}</p>
                    <p class="text-gray">Target: {{ we.sets }} sets Ã— {{ we.reps|default:"timed" }} reps</p>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="sets_{{ we.exercise.id }}">Sets Completed</label>
                    <input type="number" name="sets_completed" id="sets_{{ we.exercise.id }}" min="0" value="{{ we.sets }}" required>
                </div>
                
                {% if we.reps %}
                <div class="form-group">
                    <label for="reps_{{ we.exercise.id }}">Reps Completed</label>
                    <input type="number" name="reps_completed" id="reps_{{ we.exercise.id }}" min="0" value="{{ we.reps }}">
                </div>
                {% endif %}
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="weight_{{ we.exercise.id }}">Weight (kg)</label>
                    <input type="number" step="0.5" name="weight_used" id="weight_{{ we.exercise.id }}" min="0">
                </div>
                
                {% if we.duration %}
                <div class="form-group">
                    <label for="duration_{{ we.exercise.id }}">Duration (seconds)</label>
                    <input type="number" name="duration_seconds" id="duration_{{ we.exercise.id }}" value="{{ we.duration }}">
                </div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="notes_{{ we.exercise.id }}">Notes</label>
                <input type="text" name="notes" id="notes_{{ we.exercise.id }}" placeholder="How did it feel?">
            </div>
            
            <button type="submit" class="btn btn-primary">Log Exercise</button>
        </form>
        {% endfor %}
        
        <a href="{% url 'complete_workout' session.id %}" class="btn btn-success btn-block mt-3">Complete Workout</a>
    </div>
</div>
{% endblock %}